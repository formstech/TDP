<?php
$protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') ? "https://" : "http://";
$currentURL = $protocol . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
?>
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Contacto Â· L.N. Edgar Arturo Siller Rubio</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
:root{
  --card:rgba(22,22,22,0.8);
  --gold:#c6a75e;
  --gold-light:#e6c77a;
  --text:#f5f5f5;
  --muted:#9e9e9e;
  --radius:26px;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(135deg,#000,#111,#000);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:20px;
}

.container{width:100%;max-width:520px;}

.card{
  background:var(--card);
  backdrop-filter:blur(18px);
  border-radius:var(--radius);
  padding:55px 35px;
  text-align:center;
  border:1px solid rgba(198,167,94,0.25);
  box-shadow:0 30px 70px rgba(0,0,0,0.8);
}

.photo-circle{
  width:200px;
  height:200px;
  border-radius:50%;
  margin:0 auto 35px;
  border:3px solid var(--gold);
  overflow:hidden;
  background-image:url('https://i.postimg.cc/C1Xpc6ML/Whats-App-Image-2026-02-17-at-3-26-13-PM.jpg');
  background-size:110%;
  background-position:center 25%;
  background-repeat:no-repeat;
  box-shadow:0 0 60px rgba(198,167,94,0.35),
             inset 0 0 40px rgba(0,0,0,0.6);
}

h1{
  font-size:1.6rem;
  margin-bottom:8px;
  color:var(--gold-light);
  font-weight:800;
}

.gold-line{
  width:70px;
  height:3px;
  background:linear-gradient(90deg,var(--gold),var(--gold-light));
  margin:12px auto 20px;
}

.role{
  font-size:1rem;
  color:var(--muted);
  margin-bottom:35px;
}

.socials{
  display:flex;
  flex-direction:column;
  gap:18px;
  align-items:center;
}

.social-btn{
  padding:15px;
  border-radius:16px;
  background:rgba(30,30,30,0.85);
  border:1px solid rgba(198,167,94,0.25);
  color:var(--text);
  font-weight:600;
  width:100%;
  max-width:380px;
  cursor:pointer;
  transition:.3s ease;
}

.social-btn:hover{
  background:linear-gradient(135deg,var(--gold),var(--gold-light));
  color:#000;
  transform:translateY(-4px);
}

.footer-note{
  font-size:.85rem;
  color:#666;
  margin-top:30px;
}

/* MODAL QR */
#qrModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.9);
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  visibility:hidden;
  transition:.4s ease;
}

#qrModal.active{
  opacity:1;
  visibility:visible;
}

.qr-box{
  background:#161616;
  padding:35px;
  border-radius:24px;
  text-align:center;
  border:1px solid rgba(198,167,94,.4);
  transform:scale(.8);
  transition:.4s ease;
}

#qrModal.active .qr-box{
  transform:scale(1);
}

.qr-box h2{
  color:var(--gold-light);
  margin-bottom:20px;
}

.close-btn{
  margin-top:20px;
  padding:10px 25px;
  border-radius:12px;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">
  <div class="card">

    <div class="photo-circle"></div>

    <h1>L.N. Edgar Arturo Siller Rubio</h1>
    <div class="gold-line"></div>
    <div class="role">Nutriller Â· AsesorÃ­a Nutricional Personalizada</div>

    <div class="socials">
      <button class="social-btn" onclick="shareCard()">ðŸ“¤ Compartir tarjeta</button>
      <button class="social-btn" onclick="showQR()">ðŸ”³ Mostrar CÃ³digo QR</button>
    </div>

    <div class="footer-note">Desarrollado por Form Tech</div>

  </div>
</div>

<!-- MODAL QR -->
<div id="qrModal">
  <div class="qr-box">
    <h2>Escanea mi tarjeta</h2>
    <div id="qrcode"></div>
    <button class="close-btn" onclick="closeQR()">Cerrar</button>
  </div>
</div>

<script>
function shareCard(){
  if(navigator.share){
    navigator.share({
      title: "Tarjeta Digital - Edgar Siller",
      text: "Te comparto mi tarjeta digital",
      url: "<?php echo $currentURL; ?>"
    });
  } else {
    // Si no soporta compartir â†’ copia el link
    navigator.clipboard.writeText("<?php echo $currentURL; ?>");
    alert("Enlace copiado. Puedes pegarlo en WhatsApp o mensaje.");
  }
}

function showQR(){
  const modal = document.getElementById("qrModal");
  modal.classList.add("active");
  document.getElementById("qrcode").innerHTML="";
  new QRCode(document.getElementById("qrcode"), {
    text: "<?php echo $currentURL; ?>",
    width: 220,
    height: 220
  });
}

function closeQR(){
  document.getElementById("qrModal").classList.remove("active");
}
</script>

</body>
</html>
