<?php
$currentURL = "https://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
?>
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tarjeta Digital Profesional</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Montserrat',sans-serif;
}

body{
    background: linear-gradient(135deg,#1f1c2c,#928dab);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    padding:20px;
}

.card{
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(20px);
    border-radius:30px;
    padding:40px 25px;
    width:100%;
    max-width:420px;
    text-align:center;
    color:white;
    box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

.profile-img{
    width:120px;
    height:120px;
    border-radius:50%;
    object-fit:cover;
    border:4px solid white;
    margin-bottom:20px;
}

h1{
    font-size:22px;
    font-weight:700;
}

p{
    opacity:0.8;
    margin-bottom:25px;
}

.socials{
    display:flex;
    flex-direction:column;
    gap:12px;
}

.social-btn{
    background:white;
    color:#333;
    padding:12px;
    border-radius:25px;
    text-decoration:none;
    font-weight:600;
    transition:0.3s;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
}

.social-btn:hover{
    transform:translateY(-3px);
}

.share-section{
    margin-top:25px;
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
}

.action-btn{
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    border:none;
    padding:12px 18px;
    border-radius:25px;
    color:white;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.action-btn:hover{
    transform:translateY(-3px);
}

.qr-preview{
    margin-top:25px;
}

.qr-preview img{
    width:150px;
    border-radius:15px;
}

.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    justify-content:center;
    align-items:center;
}

.modal-content{
    background:white;
    padding:30px;
    border-radius:20px;
    text-align:center;
    max-width:300px;
}

.modal-content img{
    width:220px;
}

.close-btn{
    margin-top:15px;
    background:#6a11cb;
    color:white;
    padding:8px 15px;
    border:none;
    border-radius:20px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="card">

    <img src="https://via.placeholder.com/200" class="profile-img" alt="Perfil">

    <h1>Tu Nombre Aquí</h1>
    <p>Asesor Profesional</p>

    <div class="socials">
        <a href="https://wa.me/5210000000000" class="social-btn"><i class="fa-brands fa-whatsapp"></i> WhatsApp</a>
        <a href="https://facebook.com/" class="social-btn"><i class="fa-brands fa-facebook"></i> Facebook</a>
        <a href="https://instagram.com/" class="social-btn"><i class="fa-brands fa-instagram"></i> Instagram</a>
        <a href="https://youtube.com/" class="social-btn"><i class="fa-brands fa-youtube"></i> YouTube</a>
    </div>

    <div class="share-section">
        <button class="action-btn" onclick="shareCard()">
            <i class="fa-solid fa-share-nodes"></i> Compartir
        </button>

        <button class="action-btn" onclick="openQR()">
            <i class="fa-solid fa-qrcode"></i> Ver QR Grande
        </button>
    </div>

    <div class="qr-preview">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=<?php echo urlencode($currentURL); ?>" alt="QR">
    </div>

</div>

<div class="modal" id="qrModal">
    <div class="modal-content">
        <h3>Escanea para abrir</h3>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=<?php echo urlencode($currentURL); ?>" alt="QR Grande">
        <br>
        <button class="close-btn" onclick="closeQR()">Cerrar</button>
    </div>
</div>

<script>
function shareCard(){
    if(navigator.share){
        navigator.share({
            title: document.title,
            text: "Te comparto mi tarjeta digital",
            url: window.location.href
        });
    } else {
        alert("Tu dispositivo no permite compartir directo. Usa el código QR.");
        openQR();
    }
}

function openQR(){
    document.getElementById("qrModal").style.display="flex";
}

function closeQR(){
    document.getElementById("qrModal").style.display="none";
}
</script>

</body>
</html>
